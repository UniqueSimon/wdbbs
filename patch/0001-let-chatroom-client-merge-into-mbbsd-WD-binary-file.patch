From acdc214441efc1d8f67038cbe4ca0fc1775a857d Mon Sep 17 00:00:00 2001
From: holishing <holishingtest@gmail.com>
Date: Thu, 3 May 2018 05:21:13 +0800
Subject: [PATCH] let chatroom client merge into mbbsd(WD/) binary file.

---
 WD/Makefile       | 6 +++---
 WD/WD.p           | 2 ++
 {SO => WD}/chat.c | 0
 WD/menu.c         | 6 +++---
 4 files changed, 8 insertions(+), 6 deletions(-)
 rename {SO => WD}/chat.c (100%)

diff --git a/WD/Makefile b/WD/Makefile
index a9e9460..6453f07 100644
--- a/WD/Makefile
+++ b/WD/Makefile
@@ -36,17 +36,17 @@ LDFLAGS	+= -Wl,-export-dynamic -lcompat
 SRC =	announce.c bbs.c board.c cache.c edit.c \
 	io.c mail.c mbbsd.c menu.c more.c name.c read.c record.c\
 	register.c screen.c stuff.c talk.c user.c term.c\
-	admin.c list.c
+	admin.c list.c chat.c
 
 MOBJ =	announce.o bbs.o board.o cache.o edit.o \
 	io.o mail.o mbbsd.o menu.o more.o name.o read.o record.o\
 	register.o screen.o stuff.o talk.o user.o term.o\
-	admin.o list.o
+	admin.o list.o chat.o
 
 PRO =	announce.x bbs.x board.x cache.x edit.x \
 	io.x mail.x mbbsd.x menu.x more.x name.x read.x record.x\
 	register.x screen.x stuff.x talk.x user.x term.x\
-	admin.x list.x
+	admin.x list.x chat.x
 
 ETC =	Makefile $(HDR)
 
diff --git a/WD/WD.p b/WD/WD.p
index ea4cf0d..bfd97fe 100644
--- a/WD/WD.p
+++ b/WD/WD.p
@@ -267,3 +267,5 @@ void listdoent(int num, fileheader *ent);
 void listtitle(void);
 int ListMain(void);
 void ListEdit(char *fname);
+/* chat.c */
+int t_chat();
diff --git a/SO/chat.c b/WD/chat.c
similarity index 100%
rename from SO/chat.c
rename to WD/chat.c
diff --git a/WD/menu.c b/WD/menu.c
index 6cb34d0..a31cdba 100644
--- a/WD/menu.c
+++ b/WD/menu.c
@@ -442,8 +442,8 @@ favor_edit,PERM_BASIC,"FFavorEdit    [
 /* Talk menu                                             */
 /* ----------------------------------------------------- */
 
-int t_users(), t_idle(), t_query(), t_pager();
-// t_chat(), t_list(), t_talk();
+int t_users(), t_idle(), t_query(), t_pager(), t_chat();
+// t_list(), t_talk();
 /* Thor: for ask last call-in message */
 int t_display();
 
@@ -456,7 +456,7 @@ static struct MENU talklist[] = {
 /*
   t_talk,       PERM_PAGE,      "TTalk          [找人聊天]",0,
  */
-  "SO/chat.so:t_chat",PERM_CHAT,"CChatRoom      [連線聊天]",1,
+  t_chat,       PERM_CHAT,      "CChatRoom      [連線聊天]",1,
   t_display,    0,              "DDisplay       [水球回顧]",0,
 NULL, 0, NULL,0};
 
-- 
2.17.0

